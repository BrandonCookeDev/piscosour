

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>system-checker</title>
    <link rel="stylesheet" type="text/css" href="../../css/main.css">
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha256-/SIrNqv8h6QGKDuNoLGA4iret+kyesCkHGzVUUV0shc=" crossorigin="anonymous"></script>
  </head>
  <body>
    <section class="docs">
      <aside>

        <div class="logoContainer">
          <a href="/">
            <img src="../../images/logo.svg" class="logo" />
            Piscosour
          </a>

        </div>
        <ul class="main_menu">
          
            
            <li>
              <h4>General</h4>
              
                
                  
                    <a href="../../developers/what_is_piscosour.html">What is piscosour</a>
                  
                
              
                
                  
                    <a href="../../developers/get_started.html">Get started</a>
                  
                
              
                
              
                
              
                
              
            </li>

            <li>
              <h4>Guides</h4>
              <ul>
              
                
              
                
              
                
              
                
                  
                  <li>
                    
                    <a href="../../developers/guides/01-contexts.html">Contexts</a>
                    
                  </li>
                  
                  <li>
                    
                    <a href="../../developers/guides/02-steps.html">Steps</a>
                    
                  </li>
                  
                  <li>
                    
                    <a href="../../developers/guides/03-flows.html">Flows</a>
                    
                  </li>
                  
                  <li>
                    
                    <a href="../../developers/guides/04-stages.html">Stages</a>
                    
                  </li>
                  
                  <li>
                    
                    <a href="../../developers/guides/05-parameters.html">Parameters</a>
                    
                  </li>
                  
                  <li>
                    
                    <a href="../../developers/guides/06-inquire.html">Inquire</a>
                    
                  </li>
                  
                  <li>
                    
                    <a href="../../developers/guides/07-plugins.html">Plugins</a>
                    
                  </li>
                  
                  <li>
                    
                    <a href="../../developers/guides/08-parameters_between_steps.html">Communication between steps</a>
                    
                  </li>
                  
                  <li>
                    
                    <a href="../../developers/guides/09-steps-advanced.html">Advanced features in steps</a>
                    
                  </li>
                  
                  <li>
                    
                    <a href="../../developers/guides/10-requirements.html">Requirements</a>
                    
                  </li>
                  
                  <li>
                    
                    <a href="../../developers/guides/11-configuration.html">Recipe Configuration</a>
                    
                  </li>
                  
                  <li>
                    
                    <a href="../../developers/guides/12-guidelines.html">Guidelines</a>
                    
                  </li>
                  
                  <li>
                    
                    <a href="../../developers/guides/13-analytics.html">Google Analytics Integration</a>
                    
                  </li>
                  
                  <li>
                    
                    <a href="../../developers/guides/14-logger.html">Logger</a>
                    
                  </li>
                  
                  <li>
                    
                    <a href="../../developers/guides/15-implementations.html">Implementations</a>
                    
                  </li>
                  
                
              
                
              
              </ul>
            </li>

            <li>
              <h4>Tutorials</h4>
              <ul>
              
                
              
                
              
                
              
                
              
                
                  
                  <li>
                    
                    <a href="../../developers/tutorials/pisco-website.html">Create WebSite Recipe</a>
                    
                  </li>
                  
                  <li>
                    
                    <a href="../../developers/tutorials/img-empty-submenu.png"></a>
                    
                  </li>
                  
                
              
              </ul>
            </li>

            
            <li>
              <h4>Plugins</h4>
              <ul>
                
                  
                
                  
                
                  
                    
                    <li>
                      
                      <a href="../../developers/documents/context.html">context</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/fsutils.html">fsutils</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/inquirer.html">inquirer</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/installer.html">installer</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/launcher.html">launcher</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/os.html">os</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/piscosour.html">piscosour</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/skipper.html">skipper</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/stream-write-hook.html">stream-write-hook</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/system-checker.html" class="selected">system-checker</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/system-saver.html">system-saver</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/test.html">test</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/userConfig.html">userConfig</a>
                      
                    </li>
                    
                  
                
                  
                
                  
                
              </ul>
            </li>
            
            
          
            
          
            
          
            
          
        </ul>

        
          
        
          
        
          
        
          
          <a href="../../users/get_started.html"
            class="switch_target">
            Docs for users
          </a>
          
        
      </aside>
      <article>
        <h1 id="plugins-system-checker">Plugins: system-checker</h1>
<h1 id="system-checker-plugin">system-checker plugin</h1>
<p>The system <a href="../guides/10-requirements.html">requirements</a> are other commands that pisco needs for a pipeline execution. This plugin checks if everything is installed and ready to use by piscosour.</p>
<h2 id="core-check-hook">core-check hook</h2>
<p>Realize how to check system requirements of a piscosour command.</p>
<h3 id="1-define-version-match-only-in-the-cases-where-could-be-diferent-">1. Define version match (Only in the cases where could be diferent)</h3>
<p>By default version is taken asking the command with -v and assume that command return version plain without test.</p>
<pre><code class="lang-sh">$ bower -v 
1.7.9
</code></pre>
<p>But in some cases this is not true, in this cases you can define matches inside <strong>piscosour.json</strong>:  </p>
<p>Example of piscosour.json</p>
<pre><code class="lang-json">{
  &quot;params&quot;: {
    &quot;versions&quot;: {
      &quot;java&quot;: {
        &quot;option&quot; : &quot;-version&quot;,
        &quot;regexp&quot; : &quot;\&quot;(.*?)_&quot;
      }
    }
  }
}
</code></pre>
<p>By default this is the versions defined inside core:</p>
<pre><code class="lang-json">{
  &quot;params&quot;: {
    &quot;versions&quot;: {
      &quot;bower&quot; : {
        &quot;npm&quot;: true,
        &quot;list&quot;: &quot;bower cache list&quot;,
        &quot;cmdInstaller&quot;: &quot;bower install&quot;        
      },
      &quot;npm&quot; : {
        &quot;list&quot;: &quot;npm list -g --depth 0&quot;,
        &quot;regexp&quot;: &quot;\\@(.*?)\\s&quot;,
        &quot;cmdInstaller&quot;: &quot;npm install -g&quot;
      },    
      &quot;java&quot;: {
        &quot;option&quot; : &quot;-version&quot;,
        &quot;regexp&quot; : &quot;\&quot;(.*?)_&quot;
      },
      &quot;sass&quot; : {
        &quot;regexp&quot; : &quot;s (.*?) &quot;
      },
      &quot;git&quot;: {
        &quot;option&quot; : &quot;--version&quot;,
        &quot;regexp&quot; : &quot;n (.*?)\\n&quot;
      }
    }
  }
}
</code></pre>
<ul>
<li><code>key</code> (for example &#39;java&#39;): is the command that you need inside your step.</li>
<li><code>option</code>: (optional, default is &#39;-v&#39;) if version is set the way to check this version.</li>
<li><code>regexp</code>: (optional) if version is on a string the way to extract only the version. Overwrite version defined on piscosour.json</li>
<li><code>list:</code> (optional) command used to get a stdout to use the regexp function in orther to get the version of the item you want to check.</li>
<li><code>cmdInstaller:</code> (optional) command used to install packages using this key (for example &#39;npm install -g&#39; or &#39;bower install&#39;)</li>
</ul>
<h4 id="list-tip">List tip</h4>
<p>Useful when you want to check if some dependency is listed by any command. </p>
<ol>
<li>Set list in version (f.i. in npm)</li>
<li>In any other requirement set listedIn: (f.i. module: set listedIn: npm)</li>
</ol>
<p>this pugling is going to check the version returned when the match with regexp is done.</p>
<h3 id="2-define-system-requirements-in-all-your-steps-">2. Define system requirements in all your steps.</h3>
<p>The system requirements are defined in <code>config.json</code> file inside every step.</p>
<p><strong>requirements</strong> All dependencies are defined inside requirements</p>
<p>Example of config.json:</p>
<pre><code class="lang-json">{
  &quot;requirements&quot;: {
    &quot;polymer&quot; : {
      &quot;installer&quot;: &quot;bower&quot;,
      &quot;listedIn&quot;: &quot;bower&quot;,
      &quot;uri&quot;: &quot;https://github.com/Polymer/polymer.git#v1.6.1&quot;,
      &quot;regexp&quot;: &quot;=(.*?)&quot;
    },
    &quot;generator-pisco-recipe&quot; : {
      &quot;installer&quot;: &quot;npm&quot;,
      &quot;listedIn&quot;: &quot;npm&quot;,
      &quot;version&quot; : &quot;0.0.2&quot;
    },
    &quot;pisco&quot; : {
      &quot;installer&quot;: &quot;npm&quot;,
      &quot;pkg&quot; : &quot;piscosour&quot;,
      &quot;version&quot; : &quot;0.5.0&quot;
    },
    &quot;cordova&quot; : {
      &quot;installer&quot;: &quot;npm&quot;,
      &quot;version&quot; : &quot;5.4.1&quot;
    },
    &quot;yo&quot; : {&quot;npm&quot;: true},
    &quot;bower&quot; : {
      &quot;installer&quot;: &quot;npm&quot;,
      &quot;version&quot; : &quot;1.7.9&quot;
    },
    &quot;java&quot;: {
      &quot;version&quot;: &quot;1.7.0&quot;
    },
    &quot;sass&quot; : {
      &quot;version&quot;: &quot;3.1.0&quot;
    }
  }
}
</code></pre>
<p>This is the possible parameters that you need in order to define a system requirement.</p>
<ul>
<li><code>key</code> (for example &#39;java&#39;): is the command that you need inside your step.</li>
<li><code>installer</code> (optional): package command, search inside requirements to check the cmdInstaller.</li>
<li><code>version</code>: (optional) is the minimum version that you need for the command. Overwrite version defined on piscosour.json</li>
<li><code>option</code>: (optional, default is &#39;-v&#39;) if version is set the way to check this version.</li>
<li><code>regexp</code>: (optional) if version is on a string the way to extract only the version. Overwrite version defined on piscosour.json</li>
<li><code>listedIn</code>: (optional) use the &#39;list&#39; value of this parameter in order to check if this dependency is available.</li>
<li><code>uri</code>: (optional) only apply in npm commands. Uri of the git repo.</li>
<li><code>pkg</code>: (optional) only apply in npm commands. Used when executable and pkg are different.</li>
</ul>
<h3 id="3-check-if-a-pisco-command-has-all-system-requirements-satisfied">3. Check if a pisco command has all system requirements satisfied</h3>
<pre><code>pisco context-sample:step-name --pstage core-check --b-disablePrompts --b-disableContextCheck
</code></pre><p>Command explanation:</p>
<ul>
<li><code>pisco context-sample:step-name</code>: is the pisco command that you want to check.</li>
<li><code>--pstage core-check</code>: this means that only the core-check stage is executed for all the pipeline. System requirements check is a <strong>pre-hook</strong> of the stage <strong>core-check</strong> so you have to execute only this stage.</li>
<li><code>--b-disablePrompts</code>: disable all prompts for the command.</li>
<li><code>--b-disableContextCheck</code>: disable context checks for commands that need one.</li>
</ul>
<p>this is the result of the execution for every step that would have system requirements defined:</p>
<pre><code>[12:14:32] java ( 1.7.0 ) is required -&gt;  java ( 1.8.0_65 ) impossible to parse ... WARNING!
[12:14:33] cordova ( 5.4.1 ) is required -&gt;  cordova ( 5.4.1 ) is installed ... OK
[12:14:34] yo ( any version ) is required -&gt;  yo is installed ... OK
[12:14:35] bower ( 1.0.0 ) is required -&gt;  bower ( 1.7.7 ) is installed ... OK
[12:14:35] sass ( 3.1.0 ) is required -&gt;  sass ( 3.4.19 ) is installed ... OK
</code></pre><p>If any system requirement is not satisfied the command will throw an error and stops...</p>

      </article>
    </section>
    <script type="text/javascript" src="../../js/highlight.pack.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
      $(function(){
      	$('.toggle_section').on('click', function(ev) {
          $(ev.currentTarget).parent('li').toggleClass('open');
        });
      });

    </script>
  </body>
</html>
