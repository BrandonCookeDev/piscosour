

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>system-checker</title>
    <link rel="stylesheet" type="text/css" href="../../css/main.css">
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha256-/SIrNqv8h6QGKDuNoLGA4iret+kyesCkHGzVUUV0shc=" crossorigin="anonymous"></script>
  </head>
  <body>
    <section class="docs">
      <aside>

        <div class="logoContainer">
          <a href="/">
            <img src="../../images/logo.svg" class="logo" />
            Piscosour
          </a>

        </div>
        <ul class="main_menu">
          
            
            <li>
              <h4>General</h4>
              
                
              
                
                  
                    <a href="../../developers/get_started.html">Get started</a>
                  
                
              
                
              
                
              
            </li>

            <li>
              <h4>Guides</h4>
              <ul>
              
                
              
                
              
                
                  
                  <li>
                    
                    <a href="../../developers/guides/packaging.html">Packaging best practices</a>
                    
                  </li>
                  
                
              
                
              
              </ul>
            </li>

            <li>
              <h4>Tutorials</h4>
              <ul>
              
                
              
                
              
                
              
                
                  
                  <li>
                    
                    <a href="../../developers/tutorials/convert_to_recipe.html">Convert to recipe</a>
                    
                  </li>
                  
                
              
              </ul>
            </li>

            
            <li>
              <h4>Plugins</h4>
              <ul>
                
                  
                    
                    <li>
                      
                      <a href="../../developers/documents/context.html">context</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/fsutils.html">fsutils</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/inquirer.html">inquirer</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/installer.html">installer</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/launcher.html">launcher</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/os.html">os</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/piscosour.html">piscosour</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/skipper.html">skipper</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/stream-write-hook.html">stream-write-hook</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/system-checker.html" class="selected">system-checker</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/system-saver.html">system-saver</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/test.html">test</a>
                      
                    </li>
                    
                    <li>
                      
                      <a href="../../developers/documents/userConfig.html">userConfig</a>
                      
                    </li>
                    
                  
                
                  
                
                  
                
                  
                
              </ul>
            </li>
            
            
          
            
          
            
          
            
          
        </ul>

        
          
        
          
        
          
        
          
          <a href="../../users/get_started.html"
            class="switch_target">
            Docs for users
          </a>
          
        
      </aside>
      <article>
        <h1 id="plugins-system-checker">Plugins: system-checker</h1>
<h3 id="how-to-check-system-requirements-of-a-piscosour-command-">How to check system requirements of a piscosour command.</h3>
<p>The system requirements are other commands that pisco needs for a pipeline execution. This plugin checks if everything is installed and ready to use by piscosour.</p>
<h4 id="1-define-version-match-only-in-the-cases-where-could-be-diferent-">1. Define version match (Only in the cases where could be diferent)</h4>
<p>By default version is taken asking the command with -v and assume that command return version plain without test.</p>
<pre><code>bower -v 
&amp;gt; 1.7.9
</code></pre><p>But in some cases this is not true, in this cases you can define matches inside <strong>piscosour.json</strong>:  </p>
<p>Example of piscosour.json</p>
<pre><code>{
  [...]  
  &amp;quot;params&amp;quot;: {
    [...]
    &amp;quot;versions&amp;quot;: {
      &amp;quot;java&amp;quot;: {
        &amp;quot;option&amp;quot; : &amp;quot;-version&amp;quot;,
        &amp;quot;regexp&amp;quot; : &amp;quot;\&amp;quot;(.*?)_&amp;quot;
      },
      [...]
    },
  [...]
}
</code></pre><p>By default this is the versions defined inside core:</p>
<pre><code>    &amp;quot;versions&amp;quot;: {
      &amp;quot;bower&amp;quot; : {
        &amp;quot;npm&amp;quot;: true,
        &amp;quot;list&amp;quot;: &amp;quot;bower cache list&amp;quot;,
        &amp;quot;cmdInstaller&amp;quot;: &amp;quot;bower install&amp;quot;        
      },
      &amp;quot;npm&amp;quot; : {
        &amp;quot;list&amp;quot;: &amp;quot;npm list -g --depth 0&amp;quot;,
        &amp;quot;regexp&amp;quot;: &amp;quot;\\@(.*?)\\s&amp;quot;
        &amp;quot;cmdInstaller&amp;quot;: &amp;quot;npm install -g&amp;quot;
      },    
      &amp;quot;java&amp;quot;: {
        &amp;quot;option&amp;quot; : &amp;quot;-version&amp;quot;,
        &amp;quot;regexp&amp;quot; : &amp;quot;\&amp;quot;(.*?)_&amp;quot;
      },
      &amp;quot;sass&amp;quot; : {
        &amp;quot;regexp&amp;quot; : &amp;quot;s (.*?) &amp;quot;
      },
      &amp;quot;git&amp;quot;: {
        &amp;quot;option&amp;quot; : &amp;quot;--version&amp;quot;,
        &amp;quot;regexp&amp;quot; : &amp;quot;n (.*?)\\n&amp;quot;
      }
    }
</code></pre><ul>
<li><strong>key</strong> (for example &#39;java&#39;): is the command that you need inside your shot.</li>
<li><strong>option</strong>: (optional, default is &#39;-v&#39;) if version is set the way to check this version.</li>
<li><strong>regexp</strong>: (optional) if version is on a string the way to extract only the version. Overwrite version defined on piscosour.json</li>
<li><strong>list:</strong> (optional) command used to get a stdout to use the regexp function in orther to get the version of the item you want to check.</li>
<li><strong>cmdInstaller:</strong> (optional) command used to install packages using this key (for example &#39;npm install -g&#39; or &#39;bower install&#39;)</li>
</ul>
<h5 id="list-tip">List tip</h5>
<p>Useful when you want to check if some dependency is listed by any command. </p>
<ol>
<li>Set list in version (f.i. in npm)</li>
<li>In any other requirement set listedIn: (f.i. module: set listedIn: npm)</li>
</ol>
<p>this pugling is going to check the version returned when the match with regexp is done.</p>
<h4 id="2-define-system-requirements-in-all-your-shots-">2. Define system requirements in all your shots.</h4>
<p>The system requirements are defined in <strong>params.json</strong> file inside every shot.</p>
<p>-<strong>requirements</strong> All dependencies are defined inside requirements</p>
<p>Example of params.json:</p>
<pre><code>{
  &amp;quot;requirements&amp;quot;: {
    &amp;quot;polymer&amp;quot; : {
      &amp;quot;installer&amp;quot;: &amp;quot;bower&amp;quot;,
      &amp;quot;listedIn&amp;quot;: &amp;quot;bower&amp;quot;,
      &amp;quot;uri&amp;quot;: &amp;quot;https://github.com/Polymer/polymer.git#v1.6.1&amp;quot;,
      &amp;quot;regexp&amp;quot;: &amp;quot;=(.*?)&amp;quot;
    },
    &amp;quot;generator-pisco-recipe&amp;quot; : {
      &amp;quot;installer&amp;quot;: &amp;quot;npm&amp;quot;,
      &amp;quot;listedIn&amp;quot;: &amp;quot;npm&amp;quot;,
      &amp;quot;version&amp;quot; : &amp;quot;0.0.2&amp;quot;
    },
    &amp;quot;pisco&amp;quot; : {
      &amp;quot;installer&amp;quot;: &amp;quot;npm&amp;quot;,
      &amp;quot;pkg&amp;quot; : &amp;quot;piscosour&amp;quot;,
      &amp;quot;version&amp;quot; : &amp;quot;0.5.0&amp;quot;
    },
    &amp;quot;cordova&amp;quot; : {
      &amp;quot;installer&amp;quot;: &amp;quot;npm&amp;quot;,
      &amp;quot;version&amp;quot; : &amp;quot;5.4.1&amp;quot;
    },
    &amp;quot;yo&amp;quot; : {&amp;quot;npm&amp;quot;: true},
    &amp;quot;bower&amp;quot; : {
      &amp;quot;installer&amp;quot;: &amp;quot;npm&amp;quot;,
      &amp;quot;version&amp;quot; : &amp;quot;1.7.9&amp;quot;
    },
    &amp;quot;java&amp;quot;: {
      &amp;quot;version&amp;quot;: &amp;quot;1.7.0&amp;quot;
    },
    &amp;quot;sass&amp;quot; : {
      &amp;quot;version&amp;quot;: &amp;quot;3.1.0&amp;quot;
    }
  },
  [...]
}
</code></pre><p>This is the possible parameters that you need in order to define a system requirement.</p>
<ul>
<li><strong>key</strong> (for example &#39;java&#39;): is the command that you need inside your shot.</li>
<li><strong>installer</strong> (optional): package command, search inside requirements to check the cmdInstaller.</li>
<li><strong>version</strong>: (optional) is the minimum version that you need for the command. Overwrite version defined on piscosour.json</li>
<li><strong>option</strong>: (optional, default is &#39;-v&#39;) if version is set the way to check this version.</li>
<li><strong>regexp</strong>: (optional) if version is on a string the way to extract only the version. Overwrite version defined on piscosour.json</li>
<li><strong>listedIn</strong>: (optional) use the &#39;list&#39; value of this parameter in order to check if this dependency is available.</li>
<li><strong>uri</strong>: (optional) only apply in npm commands. Uri of the git repo.</li>
<li><strong>pkg</strong>: (optional) only apply in npm commands. Used when executable and pkg are different.</li>
</ul>
<h4 id="3-check-if-a-pisco-command-has-all-system-requirements-satisfied">3. Check if a pisco command has all system requirements satisfied</h4>
<pre><code>cells component:validate --pstage core-check --b-disablePrompts --b-disableContextCheck
</code></pre><p>Command explanation:</p>
<ul>
<li><strong>cells component:validate</strong>: is the pisco command that you want to check.</li>
<li><strong>--pstage core-check</strong>: this means that only the core-check stage is executed for all the pipeline. System requirements check is a <strong>pre-hook</strong> of the stage <strong>core-check</strong> so you have to execute only this stage.</li>
<li><strong>--b-disablePrompts</strong>: disable all prompts for the command.</li>
<li><strong>--b-disableContextCheck</strong>: disable context checks for commands that need one.</li>
</ul>
<p>this is the result of the execution for every shot that would have system requirements defined:</p>
<pre><code>[12:14:32] java ( 1.7.0 ) is required -&amp;gt;  java ( 1.8.0_65 ) impossible to parse ... WARNING!
[12:14:33] cordova ( 5.4.1 ) is required -&amp;gt;  cordova ( 5.4.1 ) is installed ... OK
[12:14:34] yo ( any version ) is required -&amp;gt;  yo is installed ... OK
[12:14:35] bower ( 1.0.0 ) is required -&amp;gt;  bower ( 1.7.7 ) is installed ... OK
[12:14:35] sass ( 3.1.0 ) is required -&amp;gt;  sass ( 3.4.19 ) is installed ... OK
</code></pre><p>If any system requirement is not satisfied the command will throw an error and stops...</p>

      </article>
    </section>
    <script type="text/javascript" src="../../js/highlight.pack.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
      $(function(){
      	$('.toggle_section').on('click', function(ev) {
          $(ev.currentTarget).parent('li').toggleClass('open');
        });
      });

    </script>
  </body>
</html>
